<header class="header">
    <div class="title"><a href="/" target="_top">Moyuin's Home</a></div>
    <div class="header-right">
        <nav class="links">
            <a href="/" data-i18n="nav_home" target="_top">Home</a>
            <a href="https://blog.moyuin.top" data-i18n="nav_blog">Blog</a>
            <a href="https://notes.moyuin.top" data-i18n="nav_notes">Notes</a>
            <a href="/lab/" class="active" data-i18n="nav_lab">Lab</a>
        </nav>
        <div class="controls">
            <button class="theme-toggle" id="labThemeToggleBtn" data-i18n-title="theme_toggle_title" aria-label="Toggle theme">
                <span class="icon-sun" style="display:none;"><svg width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg></span>
                <span class="icon-moon" style="display:none;"><svg width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
            </button>
            <button class="lang-toggle" id="labLangToggleBtn" data-i18n-title="lang_toggle_title" aria-label="Switch language">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>
            </button>
        </div>
    </div>
</header>

<script>
// --- Theme Switcher Logic ---
const themeBtn = document.getElementById('labThemeToggleBtn');
if (themeBtn) {
    const html = document.documentElement;
    const sunIcon = themeBtn.querySelector('.icon-sun');
    const moonIcon = themeBtn.querySelector('.icon-moon');

    const setTheme = (mode) => {
        html.classList.toggle('dark', mode === 'dark');
        const isDark = html.classList.contains('dark');
        if(sunIcon) sunIcon.style.display = isDark ? 'none' : 'inline';
        if(moonIcon) moonIcon.style.display = isDark ? 'inline' : 'none';
    };

    themeBtn.addEventListener('click', () => {
        const newMode = html.classList.contains('dark') ? 'light' : 'dark';
        setTheme(newMode);
        localStorage.setItem('theme-mode', newMode);
    });

    // Initial theme setup for this button
    const currentMode = html.classList.contains('dark') ? 'dark' : 'light';
    if(sunIcon) sunIcon.style.display = currentMode === 'dark' ? 'none' : 'inline';
    if(moonIcon) moonIcon.style.display = currentMode === 'dark' ? 'inline' : 'none';
}

// --- Language Switcher Logic (to be handled by i18next in the main page script) ---
// We just need the button to exist. The main script on lab.astro will handle it.
</script>
